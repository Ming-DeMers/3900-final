"0","#|label: matching"
"0",""
"0","treatment <- poli$treat_out"
"0","outcome <- poli$code_some_response_given"
"0",""
"0","# Step 1"
"0","match <- matchit(treat_out ~ code_some_response_given + leg_party + medianhhincom,"
"0","                 data = poli,"
"0","                 method = ""nearest"","
"0","                 distance = ""logit"","
"0","                 estimand = ""ATT"","
"0","                 ratio = 1,"
"0","                 replace = T)"
"0",""
"0","match.data(match) -> matched_df"
"0",""
"0","lm_mod <- lm(code_some_response_given ~ treat_out + leg_party + medianhhincom,"
"0","             data = matched_df)"
"0",""
"0","summary(lm_mod)"
"1","
Call:
"
"1",""
"1","lm(formula = code_some_response_given ~ treat_out + leg_party + 
    medianhhincom, data = matched_df)"
"1",""
"1","

"
"1",""
"1","Residuals:
"
"1","    Min "
"1","     1Q "
"1"," Median "
"1","     3Q "
"1","    Max "
"1","
"
"1","-0.6309 "
"1","-0.3358 "
"1","-0.2717 "
"1"," 0.5988 "
"1"," 0.7811 "
"1","
"
"1","
Coefficients:
"
"1","             "
"1","  Estimate"
"1"," Std. Error"
"1"," t value"
"1"," Pr(>|t|)"
"1","    "
"1","
(Intercept)  "
"1","  0.298252"
"1","   0.025345"
"1","  11.768"
"1","  < 2e-16"
"1"," ***"
"1","
treat_out    "
"1"," -0.115447"
"1","   0.015172"
"1","  -7.609"
"1"," 3.39e-14"
"1"," ***"
"1","
leg_partyI   "
"1"," -0.269135"
"1","   0.329075"
"1","  -0.818"
"1","   0.4135"
"1","    "
"1","
leg_partyP   "
"1","  0.380882"
"1","   0.268769"
"1","   1.417"
"1","   0.1565"
"1","    "
"1","
leg_partyR   "
"1","  0.032515"
"1","   0.014579"
"1","   2.230"
"1","   0.0258"
"1"," *  "
"1","
leg_partyR+D "
"1"," -0.326952"
"1","   0.465463"
"1","  -0.702"
"1","   0.4825"
"1","    "
"1","
medianhhincom"
"1","  0.020672"
"1","   0.005072"
"1","   4.076"
"1"," 4.66e-05"
"1"," ***"
"1","
"
"1","---
Signif. codes:  "
"1",""
"1","0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1"
"1","
"
"1","
Residual standard error:"
"1"," "
"1","0.4651"
"1"," "
"1","on"
"1"," "
"1","4193"
"1"," "
"1","degrees of freedom"
"1","
"
"1","Multiple R-squared: "
"1"," "
"1","0.01994"
"1",",	Adjusted R-squared: "
"1"," "
"1","0.01854"
"1"," "
"1","
F-statistic:"
"1"," "
"1","14.22"
"1"," "
"1","on"
"1"," "
"1","6"
"1"," "
"1","and"
"1"," "
"1","4193"
"1"," "
"1","DF,  p-value:"
"1"," "
"1","4.195e-16"
"1","
"
"1","
"
"0","att_est <- coef(lm_mod)[""treat_out""]"
"0","print(att_est)"
"1"," treat_out "
"1","
"
"1","-0.1154466 "
"1","
"
"0","summary(match)$nn # number of matched"
"1","             "
"1","   Control"
"1"," Treated"
"1","
All (ESS)    "
"1"," 2814.0000"
"1","    2779"
"1","
All          "
"1"," 2814.0000"
"1","    2779"
"1","
Matched (ESS)"
"1","  940.5482"
"1","    2779"
"1","
Matched      "
"1"," 1421.0000"
"1","    2779"
"1","
Unmatched    "
"1"," 1393.0000"
"1","       0"
"1","
Discarded    "
"1","    0.0000"
"1","       0"
"1","
"
"0","print(round(att_est, 2)) # causal estimate"
"1","treat_out "
"1","
"
"1","    -0.12 "
"1","
"
