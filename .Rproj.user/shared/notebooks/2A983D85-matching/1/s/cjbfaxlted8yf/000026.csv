"0","#|label: matching"
"0",""
"0","treatment <- poli$treat_out"
"0","outcome <- poli$code_some_response_given"
"0",""
"0","# Step 1"
"0","match <- matchit(code_some_response_given ~ treat_out + medianhhincom + leg_party,"
"0","                 data = poli,"
"0","                 method = ""nearest"","
"0","                 distance = ""Mahalanobis"","
"0","                 estimand = ""ATT"","
"0","                 ratio = 1,"
"0","                 replace = T)"
"0",""
"0","match.data(match) -> matched_df"
"0",""
"0","lm_mod <- lm(treat_out ~ code_some_response_given + medianhhincom + leg_party,"
"0","             data = matched_df,"
"0","             weights = weights)"
"0",""
"0","summary(lm_mod)"
"1","
Call:
"
"1",""
"1","lm(formula = treat_out ~ code_some_response_given + medianhhincom + 
    leg_party, data = matched_df, weights = weights)"
"1",""
"1","

"
"1","Weighted "
"1",""
"1","Residuals:
"
"1","    Min "
"1","     1Q "
"1"," Median "
"1","     3Q "
"1","    Max "
"1","
"
"1","-0.9247 "
"1","-0.3427 "
"1","-0.3068 "
"1"," 0.6039 "
"1"," 1.2431 "
"1","
"
"1","
Coefficients:
"
"1","                        "
"1","   Estimate"
"1"," Std. Error"
"1"," t value"
"1"," Pr(>|t|)"
"1","    "
"1","
(Intercept)             "
"1","  0.2580864"
"1","  0.0282773"
"1","   9.127"
"1","  < 2e-16"
"1"," ***"
"1","
code_some_response_given"
"1"," -0.0007526"
"1","  0.0161655"
"1","  -0.047"
"1","  0.96287"
"1","    "
"1","
medianhhincom           "
"1","  0.0167614"
"1","  0.0056021"
"1","   2.992"
"1","  0.00279"
"1"," ** "
"1","
leg_partyI              "
"1"," -0.3191755"
"1","  0.2674314"
"1","  -1.193"
"1","  0.23276"
"1","    "
"1","
leg_partyP              "
"1","  0.2626093"
"1","  0.2185043"
"1","   1.202"
"1","  0.22950"
"1","    "
"1","
leg_partyR              "
"1","  0.0161953"
"1","  0.0156620"
"1","   1.034"
"1","  0.30118"
"1","    "
"1","
leg_partyU              "
"1"," -0.3108026"
"1","  0.4734000"
"1","  -0.657"
"1","  0.51152"
"1","    "
"1","
"
"1","---
Signif. codes:  "
"1",""
"1","0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1"
"1","
"
"1","
Residual standard error:"
"1"," "
"1","0.4732"
"1"," "
"1","on"
"1"," "
"1","3702"
"1"," "
"1","degrees of freedom"
"1","
"
"1","Multiple R-squared: "
"1"," "
"1","0.003811"
"1",",	Adjusted R-squared: "
"1"," "
"1","0.002196"
"1"," "
"1","
F-statistic:"
"1"," "
"1"," 2.36"
"1"," "
"1","on"
"1"," "
"1","6"
"1"," "
"1","and"
"1"," "
"1","3702"
"1"," "
"1","DF,  p-value:"
"1"," "
"1","0.02809"
"1","
"
"1","
"
"0","att_est <- coef(lm_mod)[""code_some_response_given""]"
"0","print(att_est)"
"1","code_some_response_given "
"1","
"
"1","            -0.000752628 "
"1","
"
"0","summary(match)$nn # number of matched"
"1","             "
"1","   Control"
"1"," Treated"
"1","
All (ESS)    "
"1"," 3228.0000"
"1","    2365"
"1","
All          "
"1"," 3228.0000"
"1","    2365"
"1","
Matched (ESS)"
"1","  888.2365"
"1","    2365"
"1","
Matched      "
"1"," 1344.0000"
"1","    2365"
"1","
Unmatched    "
"1"," 1884.0000"
"1","       0"
"1","
Discarded    "
"1","    0.0000"
"1","       0"
"1","
"
"0","print(round(att_est, 2)) # causal estimate"
"1","code_some_response_given "
"1","
"
"1","                       0 "
"1","
"
